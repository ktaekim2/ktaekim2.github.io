---
layout: single
title: "83일차-팀프로젝트(9)-버전관리, 협업 테스트"
---

# 버전관리, 협업
기능, DB, 스토리보드의 설계가 끝났다. 우리 팀(경진하소)은 이제 본격적인 코딩에 앞서 버전관리와 협업도구로 쓸 git, github의 사전 테스트를 하였다. 나는 우리 팀원들 모두가 깃공부에 시간을 너무 빼앗기지 않고, 프로젝트를 진행하는데 문제없는 수준의 지식만 있으면 되겠다고 생각하였다. 그래서 나는 팀이 확정되던 때부터 개인시간을 들여서 조금씩 깃을 공부해왔고 우리 프로젝트를 진행하는데 필요한 정도의 지식만을 정리하여 공유하였다.

## gitflow
<img src="..\assets\images\git_flow.png">
이것은 물론 실제 업무에 적용되는 형태의 gitflow와는 전혀 다른 것이지만, 그래도 유사하게 흉내내고 싶었다. 이렇게 브랜치를 나누어서 협업하는 팀은 많이 없는것 같지만, 나는 이왕 팀프로젝트를 하니까 평소처럼 하나의 브랜치로 깃을 쓰기 보다는 깃의 협업 기능을 연습할 수 있는 좋은 기회라고 생각했다. 그리고 이 방식이 무엇보다 초보 팀프로젝트에서 깃을 잘 못써서 일어나는 사고를 막아줄 수 있을 것이라 생각했다. 4개의 로컬과 5개의 remote branch가 소스를 보관하고 있으니 실수로 main 브랜치를 포함한 1~2개의 브랜치가 엉망이 되더라도 쉽게 복구를 할 수 있을 것이라 생각한다. 그리고 브랜치의 숫자만큼 커밋 내역들도 많이 있으니. 물론 나도 팀프로젝트는 처음이니 장담할 수는 없다.

## github organizaion
또한 나는 프로젝트를 한 명의 개인 github계정에서 관리하기 보다는 모두가 주인이 될 수 있으면 좋겠다고 생각하던 중 github organizaion 기능을 찾아내었다. 쉽게 얘기하면 새로운 github계정을 하나 만드는 것인데, 다른점은 여러 사람들이 계정의 주인이 될 수 있다는 점이다. 나는 우리 팀명인 kyung-jin-ha-so로 organizaion 계정을 만들었고 우리 팀원들을 초대하여 owner 권한을 주었다.

## git-github-intellij
나는 대략적인 gitflow에 대해서 팀원들에게 설명하였고 실제 프로젝트를 시작하기 전에 테스트 프로젝트를 만들어서 협업 연습을 하였다. 위에서 설명한 gitflow의 두 방법 중 무엇이 맞을지 모르겠고, 혼자서 테스트를 해보긴 하였지만 intellij와 연동해서 각기 다른 4개의 컴퓨터로 테스트를 해본 적이 없으니, 이건 직접 해봐야 알 것 같았다. 우선 intellij가 제공하는 git, github 기능을 사용하지 않고 CLI를 사용하여 프로젝트를 github organizaion의 테스트 repository에 연결하였다. CLI로 branch를 만들고 깃 명령어들과 HEAD의 의미 등 기본적인 개념과 방법들을 팀원들에게 공유하였다. 우리는 방법1과 CLI를 사용해 문제없이 테스트 프로젝트에서 협업이 가능 하였다.

### github 웹에서 pull request, conflict 수정하는 것의 불편함
<img src="..\assets\images\git_flow.png">
방법1 테스트를 성공하고 나서 나는 방법2의 gitflow를 만든 이유를 설명했다. 우선 conflict를 수정하는 작업은 간단하지 않고 때로는 시간이 오래 소요될 것이라 생각했다. 그 작업을 자동완성도 지원되지 않는 github 웹 사이트에서 하는 것은 너무나 불편해 보였다. 그리하여 생각한 것이 local에서 모든 충돌을 해결한 후 문제없이 깨끗한 코드를 pr하여 main branch와 merge하는 것이었다. 이를 위해 intellij와 github 계정을 연동하고 pr을 하기 전에 먼저 `git pull origin main`을 하여 local에서 main branch와 현재 local의 코드를 충돌 시키고 수정하려는 작업을 하려 하였다.

### github 계정 연동 과정에서 발생한 오류
github 계정 연동 과정에서생각치 못한 오류가 있었다. 바로 github계정과의 연동이 안되면서 intellij가 무한로딩에 빠지는 것이었다. 원인은 아마 짐작컨데 repository가 organizaion에 있기 때문에 intellij가 내 계정과 연동은 되어 있지만 나의 organizaion의 repository를 인식하지 못하는 문제인 것 같았다. 이것은 토큰 방식으로 로그인 하는 것으로 해결하였다.

### pull 과정에서 발생한 오류
코드를 수정하고 intellij에서 그냥 pull을 하면 오류 메세지가 뜬다. 현재 코드와 main branch의 코드가 다르니 충돌이 일어나기 전에 지금 코드를 commit을 하던가 해서 백업 버전을 만들라는 경고창이 뜬다. 먼저 commit을 한 후 pull을 하면 된다.

### conflict-fix
intellij에서의 충돌 수정은 깃헙 웹이나 CLI에서 충돌을 수정하는것보다 몇 백배 쉽다. 버전간의 차이점을 아주 보기좋게 보여주고, 클릭 몇번으로 수정할 수 있다.

### push-pr
그리고 push후 pull request를 깃헙 웹에 가서 할 필요 없이 intellij에서 할 수 있고, 모든 pull request 목록을 보여주기도 하며 그곳에서 코드 리뷰 및 merge또한 할 수 있다. intellij는 신이다.

## 협업 테스트 완료
나는 이렇게 git-github-intellij를 이용한 협업테스트를 성공적으로 끝냈다. 앞으로 프로젝트를 진행하면서 생각지 못한 문제가 발생할 수도 있겠지만, 그때마다 기지를 발휘하여 극복할 수 있었으면 좋겠다.


