---
layout: single
title: "22일차 배운 내용 정리-MySQL(3)"
---
## 서브쿼리 (sub query)

```sql
-- allen 보다 높은 급여를 받는 사원 조회
select sal from emp where ename='allen';
select * from emp where sal > 1600;

-- 서브쿼리 사용
select * from emp where sal > (select sal from emp where ename='allen');

select * from emp where sal > (select ename from emp where ename='allen');
-- "sal"을 기준으로 판단해야 하는데 "ename"이랑 비교 해서 의미없음.
```

### 예제

<details>
<summary>
급여가 가장 적은 사원의 이름 조회
</summary>
<div markdown="1">

```sql
select ename from emp where sal = (select min(sal) from emp);
```

</div>
</details>

### 예제

<details>
<summary>
1. clark 보다 늦게 입사한 사원 조회<br>
2. 부서번호가 20인 사원 중에서 전체 사원 평균 급여보다 높은 급여를 받는 사원 조회<br>
3. 2번 조회 결과에서 부서이름, 부서위치도 함께 조회
</summary>
<div markdown="1">

```sql
-- 1
select * from emp where hiredate > (select hiredate from emp where ename='clark');

-- 2
select * from emp where sal > (select avg(sal) from emp) and deptno=20;

-- 3
select * from emp e, dept d
where e.deptno = d.deptno and e.deptno=20 and e.sal > (select avg(sal) from emp);
-- avg(e.sal) 안됨, 서브쿼리를 쓰면 서브쿼리를 먼저 실행함(약어 설정 전이므로 error)
```

</div>
</details>